import './polyfills.server.mjs';
import{G as y,V as Z,W as z,X as L,ba as U,c as T,d as u,da as J,f as P,g as A,j as q,l as w,m as D,n as j,o as G,p as H,v as V,w as R,x as $}from"./chunk-QQGZJG6Y.mjs";import"./chunk-XJNXEHJ5.mjs";import{Ab as o,Eb as F,Hc as M,Ib as N,Ic as B,Jb as I,Ma as l,Mc as O,Na as C,Z as E,bb as c,db as a,jb as i,kb as e,lb as s,qb as h,rb as S}from"./chunk-OMFD27J4.mjs";import{d as x}from"./chunk-VVCT4QZE.mjs";function K(t,d){if(t&1&&(i(0,"option",20),o(1),e()),t&2){let r=d.$implicit;a("value",r.empId),l(),F(" ",r.firstName," ",r.lastName," (",r.employeeCode,") ")}}function Q(t,d){t&1&&(i(0,"div",21),o(1," Employee is required. "),e())}function W(t,d){t&1&&(i(0,"div",21),o(1," Account holder name is required. "),e())}function X(t,d){t&1&&(i(0,"div",21),o(1," Bank name is required. "),e())}function Y(t,d){t&1&&(i(0,"div"),o(1,"Account number is required."),e())}function ee(t,d){t&1&&(i(0,"div"),o(1,"Account number must be numeric."),e())}function te(t,d){t&1&&(i(0,"div"),o(1,"Account number must be at least 8 digits."),e())}function ne(t,d){if(t&1&&(i(0,"div",21),c(1,Y,2,0,"div",22)(2,ee,2,0,"div",22)(3,te,2,0,"div",22),e()),t&2){let r,m,n,p=S();l(),a("ngIf",(r=p.bankForm.get("accountNumber"))==null||r.errors==null?null:r.errors.required),l(),a("ngIf",(m=p.bankForm.get("accountNumber"))==null||m.errors==null?null:m.errors.pattern),l(),a("ngIf",(n=p.bankForm.get("accountNumber"))==null||n.errors==null?null:n.errors.minlength)}}function ie(t,d){t&1&&(i(0,"div"),o(1,"IFSC code is required."),e())}function oe(t,d){t&1&&(i(0,"div"),o(1,"Enter a valid IFSC code."),e())}function re(t,d){if(t&1&&(i(0,"div",21),c(1,ie,2,0,"div",22)(2,oe,2,0,"div",22),e()),t&2){let r,m,n=S();l(),a("ngIf",(r=n.bankForm.get("ifscCode"))==null||r.errors==null?null:r.errors.required),l(),a("ngIf",(m=n.bankForm.get("ifscCode"))==null||m.errors==null?null:m.errors.pattern)}}function le(t,d){t&1&&(i(0,"div",21),o(1," Branch name is required. "),e())}function ae(t,d){t&1&&(i(0,"div",21),o(1," Account type is required. "),e())}var Ce=(()=>{class t{constructor(r,m,n){this.fb=r,this.authService=m,this.messageService=n,this.allEmployees=[]}ngOnInit(){this.buildForm(),this.loadEmployees()}buildForm(){this.bankForm=this.fb.group({employeeId:["",u.required],accountHolderName:["",u.required],bankName:["",u.required],accountNumber:["",[u.required,u.pattern(/^\d+$/),u.minLength(8)]],ifscCode:["",[u.required,u.pattern(/^[A-Z]{4}0[A-Z0-9]{6}$/)]],branch:["",u.required],accountType:["",u.required]})}loadEmployees(){this.authService.getAllEmployees().subscribe({next:r=>{this.allEmployees=r},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load employees."})}})}onSubmit(){if(this.bankForm.invalid){this.bankForm.markAllAsTouched(),this.messageService.add({severity:"warn",summary:"Incomplete Form",detail:"Please fill all required fields correctly."});return}let n=this.bankForm.value,{employeeId:r}=n,m=x(n,["employeeId"]);this.authService.createBankDetails(r,m).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Bank details saved successfully."}),this.bankForm.reset()},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to save bank details."})}})}goBack(){window.history.back()}static{this.\u0275fac=function(m){return new(m||t)(C(V),C(L),C(y))}}static{this.\u0275cmp=E({type:t,selectors:[["app-banking"]],standalone:!0,features:[N([y]),I],decls:55,vars:10,consts:[[1,"top-button-wrapper"],[1,"action-button",3,"click"],[1,"container","mt-4"],[3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","employeeId",1,"form-control"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"form-group","mt-3"],["type","text","placeholder","Enter account holder name","formControlName","accountHolderName",1,"form-control"],["type","text","placeholder","Enter bank name","formControlName","bankName",1,"form-control"],["type","text","placeholder","Enter account number","formControlName","accountNumber",1,"form-control"],["type","text","placeholder","e.g. SBIN0001234","formControlName","ifscCode",1,"form-control"],["type","text","placeholder","Enter branch name","formControlName","branch",1,"form-control"],["formControlName","accountType",1,"form-control"],["value","SAVINGS"],["value","CURRENT"],[1,"mt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"],[1,"text-danger"],[4,"ngIf"]],template:function(m,n){if(m&1&&(s(0,"p-toast"),i(1,"div",0)(2,"button",1),h("click",function(){return n.goBack()}),o(3,"\xD7"),e()(),i(4,"div",2)(5,"h2"),o(6,"Add Bank Details"),e(),i(7,"form",3),h("ngSubmit",function(){return n.onSubmit()}),i(8,"div",4)(9,"label"),o(10,"Employee"),e(),i(11,"select",5)(12,"option",6),o(13,"Select Employee"),e(),c(14,K,2,4,"option",7),e(),c(15,Q,2,0,"div",8),e(),i(16,"div",9)(17,"label"),o(18,"Account Holder Name"),e(),s(19,"input",10),c(20,W,2,0,"div",8),e(),i(21,"div",9)(22,"label"),o(23,"Bank Name"),e(),s(24,"input",11),c(25,X,2,0,"div",8),e(),i(26,"div",9)(27,"label"),o(28,"Account Number"),e(),s(29,"input",12),c(30,ne,4,3,"div",8),e(),i(31,"div",9)(32,"label"),o(33,"IFSC Code"),e(),s(34,"input",13),c(35,re,3,2,"div",8),e(),i(36,"div",9)(37,"label"),o(38,"Branch"),e(),s(39,"input",14),c(40,le,2,0,"div",8),e(),i(41,"div",9)(42,"label"),o(43,"Account Type"),e(),i(44,"select",15)(45,"option",6),o(46,"Select Type"),e(),i(47,"option",16),o(48,"Savings"),e(),i(49,"option",17),o(50,"Current"),e()(),c(51,ae,2,0,"div",8),e(),i(52,"div",18)(53,"button",19),o(54,"Save Bank Details"),e()()()()),m&2){let p,g,f,b,v,_,k;l(7),a("formGroup",n.bankForm),l(7),a("ngForOf",n.allEmployees),l(),a("ngIf",((p=n.bankForm.get("employeeId"))==null?null:p.invalid)&&((p=n.bankForm.get("employeeId"))==null?null:p.touched)),l(5),a("ngIf",((g=n.bankForm.get("accountHolderName"))==null?null:g.invalid)&&((g=n.bankForm.get("accountHolderName"))==null?null:g.touched)),l(5),a("ngIf",((f=n.bankForm.get("bankName"))==null?null:f.invalid)&&((f=n.bankForm.get("bankName"))==null?null:f.touched)),l(5),a("ngIf",((b=n.bankForm.get("accountNumber"))==null?null:b.invalid)&&((b=n.bankForm.get("accountNumber"))==null?null:b.touched)),l(5),a("ngIf",((v=n.bankForm.get("ifscCode"))==null?null:v.invalid)&&((v=n.bankForm.get("ifscCode"))==null?null:v.touched)),l(5),a("ngIf",((_=n.bankForm.get("branch"))==null?null:_.invalid)&&((_=n.bankForm.get("branch"))==null?null:_.touched)),l(11),a("ngIf",((k=n.bankForm.get("accountType"))==null?null:k.invalid)&&((k=n.bankForm.get("accountType"))==null?null:k.touched)),l(2),a("disabled",n.bankForm.invalid)}},dependencies:[O,M,B,R,q,G,H,T,j,P,A,$,w,D,z,Z,U,J],styles:[".bank-form[_ngcontent-%COMP%], .bank-list[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:20px;background:#f0f4f8;border-radius:8px;box-shadow:0 0 10px #0000001a}.bank-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .bank-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box}.action-button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.action-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:last-child, .action-button.cancel[_ngcontent-%COMP%]{background-color:#06f}.top-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:1rem}.bottom-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1.5rem}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:center}"]})}}return t})();export{Ce as BankingComponent};
